const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LiveDashboard.Cxfqj_W2.js","assets/chunk.BQy9AZNB.js","assets/chunk.DEQ385Nk.js","assets/chunk.DXnYxceR.js","assets/chunk.B9fqMJp4.js","assets/chunk.Bzdb9GAy.js","assets/chunk.BhLMWRjL.js","assets/web-vitals.DbSUPk88.js","assets/css/LiveDashboard.D4GEBIIi.css","assets/AIDashboard.Dlsa1gZJ.js","assets/css/AIDashboard.Dz7PVxj2.css","assets/GoogleSheetsIntegration.cT7_-lRZ.js","assets/css/GoogleSheetsIntegration.Dk-8Mxmp.css","assets/GoogleDriveIntegration.DB5PxO4A.js","assets/css/GoogleDriveIntegration.tqP-ClX9.css","assets/GoogleAppsScriptIntegration.CBMuel_6.js","assets/css/GoogleAppsScriptIntegration.BvwGXyUn.css","assets/TelegramIntegration.B-6nparB.js","assets/css/TelegramIntegration.Cbp2ZyVK.css","assets/AutomationDashboard.D_O_3uDk.js","assets/css/AutomationDashboard.DHbfWhQX.css","assets/AutomationPanelWrapper.DErDGmIC.js","assets/css/AutomationPanelWrapper.C2JYf0tU.css","assets/ConfigPageWrapper.CAMaV-VR.js","assets/css/ConfigPageWrapper.Z-cV_v4c.css"])))=>i.map(i=>d[i]);
import{r as e,a as t,g as n}from"./chunk.DEQ385Nk.js";import{r as s,u as a,L as i,R as r,B as o,e as l,f as c,N as d}from"./chunk.BQy9AZNB.js";import{_ as h}from"./chunk.BhLMWRjL.js";import{c as m,e as u,b as p,p as g,f,t as v,P as y}from"./chunk.DXnYxceR.js";import{C as x,t as b}from"./chunk.Bzdb9GAy.js";import{getCLS as _,getFID as j,getFCP as w,getLCP as T,getTTFB as N}from"./web-vitals.DbSUPk88.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E,C,k={exports:{}},S={};var I,A=(C||(C=1,k.exports=function(){if(E)return S;E=1;var t=e(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,s){var o,l={},c=null,d=null;for(o in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!r.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===l[o]&&(l[o]=t[o]);return{$$typeof:n,type:e,key:c,ref:d,props:l,_owner:i.current}}return S.Fragment=s,S.jsx=o,S.jsxs=o,S}()),k.exports),P={};const L=n(function(){if(I)return P;I=1;var e=t();return P.createRoot=e.createRoot,P.hydrateRoot=e.hydrateRoot,P}());var D,O={},R={exports:{}};function M(){return D||(D=1,(e=R).exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports),R.exports;var e}var U,$={};var F,B={},W={},H={},G={exports:{}},V={exports:{}},z={exports:{}},Y={exports:{}};function K(){return F||(F=1,function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Y)),Y.exports}var q,Q,X,J,Z={exports:{}};function ee(){return Q||(Q=1,e=z,t=K().default,n=function(){return q||(q=1,e=Z,t=K().default,e.exports=function(e,n){if("object"!=t(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports),Z.exports;var e,t}(),e.exports=function(e){var s=n(e,"string");return"symbol"==t(s)?s:s+""},e.exports.__esModule=!0,e.exports.default=e.exports),z.exports;var e,t,n}function te(){return J||(J=1,function(e){var t=function(){return X||(X=1,e=V,t=ee(),e.exports=function(e,n,s){return(n=t(n))in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e},e.exports.__esModule=!0,e.exports.default=e.exports),V.exports;var e,t}();function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}e.exports=function(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?n(Object(a),!0).forEach(function(n){t(e,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports}(G)),G.exports}var ne,se,ae={};function ie(){if(se)return H;se=1;var e=M().default;Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var t=e(te()),n=(ne||(ne=1,Object.defineProperty(ae,"__esModule",{value:!0}),ae.commonLocale=void 0,ae.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),ae),s=(0,t.default)((0,t.default)({},n.commonLocale),{},{locale:"vi_VN",today:"Hôm nay",now:"Bây giờ",backToToday:"Trở về hôm nay",ok:"OK",clear:"Xóa",week:"Tuần",month:"Tháng",year:"Năm",timeSelect:"Chọn thời gian",dateSelect:"Chọn ngày",weekSelect:"Chọn tuần",monthSelect:"Chọn tháng",yearSelect:"Chọn năm",decadeSelect:"Chọn thập kỷ",dateFormat:"D/M/YYYY",dateTimeFormat:"D/M/YYYY HH:mm:ss",previousMonth:"Tháng trước (PageUp)",nextMonth:"Tháng sau (PageDown)",previousYear:"Năm trước (Control + left)",nextYear:"Năm sau (Control + right)",previousDecade:"Thập kỷ trước",nextDecade:"Thập kỷ sau",previousCentury:"Thế kỷ trước",nextCentury:"Thế kỷ sau"});return H.default=s,H}var re,oe,le,ce,de,he,me={};function ue(){if(re)return me;re=1,Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0;return me.default={placeholder:"Chọn thời gian",rangePlaceholder:["Bắt đầu","Kết thúc"]},me}function pe(){if(oe)return W;oe=1;var e=M().default;Object.defineProperty(W,"__esModule",{value:!0}),W.default=void 0;var t=e(ie()),n=e(ue());const s={lang:Object.assign({placeholder:"Chọn thời điểm",yearPlaceholder:"Chọn năm",quarterPlaceholder:"Chọn quý",monthPlaceholder:"Chọn tháng",weekPlaceholder:"Chọn tuần",rangePlaceholder:["Ngày bắt đầu","Ngày kết thúc"],rangeYearPlaceholder:["Năm bắt đầu","Năm kết thúc"],rangeQuarterPlaceholder:["Quý bắt đầu","Quý kết thúc"],rangeMonthPlaceholder:["Tháng bắt đầu","Tháng kết thúc"],rangeWeekPlaceholder:["Tuần bắt đầu","Tuần kết thúc"],shortMonths:["Th 01","Th 02","Th 03","Th 04","Th 05","Th 06","Th 07","Th 08","Th 09","Th 10","Th 11","Th 12"],shortWeekDays:["CN","T2","T3","T4","T5","T6","T7"]},t.default),timePickerLocale:Object.assign({},n.default)};return W.default=s,W}function ge(){if(le)return B;le=1;var e=M().default;Object.defineProperty(B,"__esModule",{value:!0}),B.default=void 0;var t=e(pe());return B.default=t.default,B}function fe(){if(ce)return O;ce=1;var e=M().default;Object.defineProperty(O,"__esModule",{value:!0}),O.default=void 0;var t=e((U||(U=1,Object.defineProperty($,"__esModule",{value:!0}),$.default=void 0,$.default={items_per_page:"/ trang",jump_to:"Đến",jump_to_confirm:"xác nhận",page:"Trang",prev_page:"Trang Trước",next_page:"Trang Kế",prev_5:"Về 5 Trang Trước",next_5:"Đến 5 Trang Kế",prev_3:"Về 3 Trang Trước",next_3:"Đến 3 Trang Kế",page_size:"kích thước trang"}),$)),n=e(ge()),s=e(pe()),a=e(ue());const i="${label} không phải kiểu ${type} hợp lệ",r={locale:"vi",Pagination:t.default,DatePicker:s.default,TimePicker:a.default,Calendar:n.default,global:{placeholder:"Vui lòng chọn",close:"Đóng"},Table:{filterTitle:"Bộ lọc",filterConfirm:"Đồng ý",filterReset:"Bỏ lọc",filterEmptyText:"Không có bộ lọc",filterCheckAll:"Chọn tất cả",filterSearchPlaceholder:"Tìm kiếm bộ lọc",emptyText:"Trống",selectAll:"Chọn tất cả",selectInvert:"Chọn ngược lại",selectNone:"Bỏ chọn tất cả",selectionAll:"Chọn tất cả",sortTitle:"Sắp xếp",expand:"Mở rộng dòng",collapse:"Thu gọn dòng",triggerDesc:"Nhấp để sắp xếp giảm dần",triggerAsc:"Nhấp để sắp xếp tăng dần",cancelSort:"Nhấp để hủy sắp xếp"},Tour:{Next:"Tiếp",Previous:"Trước",Finish:"Hoàn thành"},Modal:{okText:"Đồng ý",cancelText:"Hủy",justOkText:"OK"},Popconfirm:{okText:"Đồng ý",cancelText:"Hủy"},Transfer:{titles:["",""],searchPlaceholder:"Tìm ở đây",itemUnit:"mục",itemsUnit:"mục",remove:"Gỡ bỏ",selectCurrent:"Chọn trang hiện tại",removeCurrent:"Gỡ bỏ trang hiện tại",selectAll:"Chọn tất cả",removeAll:"Gỡ bỏ tất cả",selectInvert:"Đảo ngược trang hiện tại",deselectAll:"Bỏ chọn tất cả"},Upload:{uploading:"Đang tải lên...",removeFile:"Gỡ bỏ tập tin",uploadError:"Lỗi tải lên",previewFile:"Xem trước tập tin",downloadFile:"Tải tập tin"},Empty:{description:"Trống"},Icon:{icon:"icon"},Text:{edit:"Chỉnh sửa",copy:"Sao chép",copied:"Đã sao chép",expand:"Mở rộng",collapse:"Thu gọn"},Form:{optional:"(Tùy chọn)",defaultValidateMessages:{default:"${label} không đáp ứng điều kiện quy định",required:"Hãy nhập thông tin cho trường ${label}",enum:"${label} phải có giá trị nằm trong tập [${enum}]",whitespace:"${label} không được chứa khoảng trắng",date:{format:"${label} sai định dạng ngày tháng",parse:"Không thể chuyển ${label} sang kiểu Ngày tháng",invalid:"${label} không phải giá trị Ngày tháng hợp lệ"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"${label} phải dài đúng ${len} ký tự",min:"Độ dài tối thiểu trường ${label} là ${min} ký tự",max:"Độ dài tối đa trường ${label} là ${max} ký tự",range:"Độ dài trường ${label} phải từ ${min} đến ${max} ký tự"},number:{len:"${label} phải bằng ${len}",min:"${label} phải lớn hơn hoặc bằng ${min}",max:"${label} phải nhỏ hơn hoặc bằng ${max}",range:"${label} phải nằm trong khoảng ${min}-${max}"},array:{len:"Mảng ${label} phải có ${len} phần tử ",min:"Mảng ${label} phải chứa tối thiểu ${min} phần tử ",max:"Mảng ${label} phải chứa tối đa ${max} phần tử ",range:"Mảng ${label} phải chứa từ ${min}-${max} phần tử"},pattern:{mismatch:"${label} không thỏa mãn mẫu kiểm tra ${pattern}"}}},Image:{preview:"Xem trước"},QRCode:{expired:"Mã QR hết hạn",refresh:"Làm mới",scanned:"Đã quét"},ColorPicker:{presetEmpty:"Trống",transparent:"Trong suốt",singleColor:"Màu đơn",gradientColor:"Màu chuyển sắc"}};return O.default=r,O}function ve(){return he?de:(he=1,de=fe())}const ye=n(ve()),xe=({size:e="medium",color:t="primary",text:n="Đang tải...",fullScreen:s=!1,skeleton:a=!1,progress:i=null})=>{const r=s?"loading-fullscreen":"loading-container";return a?A.jsxs("div",{className:"skeleton-loader",children:[A.jsxs("div",{className:"skeleton-header",children:[A.jsx("div",{className:"skeleton-avatar"}),A.jsxs("div",{className:"skeleton-lines",children:[A.jsx("div",{className:"skeleton-line skeleton-line-title"}),A.jsx("div",{className:"skeleton-line skeleton-line-subtitle"})]})]}),A.jsxs("div",{className:"skeleton-content",children:[A.jsx("div",{className:"skeleton-line skeleton-line-full"}),A.jsx("div",{className:"skeleton-line skeleton-line-medium"}),A.jsx("div",{className:"skeleton-line skeleton-line-short"})]})]}):A.jsxs("div",{className:`${r} ${{small:"loading-small",medium:"loading-medium",large:"loading-large"}[e]} ${{primary:"loading-primary",secondary:"loading-secondary",success:"loading-success",warning:"loading-warning",danger:"loading-danger"}[t]}`,role:"status","aria-label":"Loading content",children:[A.jsxs("div",{className:"loading-spinner",children:[A.jsx("div",{className:"spinner-ring"}),A.jsx("div",{className:"spinner-ring"}),A.jsx("div",{className:"spinner-ring"}),A.jsx("div",{className:"spinner-ring"})]}),n&&A.jsx("div",{className:"loading-text",children:n}),null!==i&&A.jsxs("div",{className:"loading-progress",children:[A.jsx("div",{className:"progress-bar",children:A.jsx("div",{className:"progress-fill",style:{width:`${Math.min(100,Math.max(0,i))}%`}})}),A.jsxs("span",{className:"progress-text",children:[Math.round(i),"%"]})]})]})},be=({children:e})=>{const[t,n]=s.useState(!1),[r,o]=s.useState(!1),l=a(),c=e=>"/"===e?"/"===l.pathname:l.pathname.startsWith(e);return A.jsxs("div",{className:"layout-container",children:[A.jsxs("header",{className:"app-header",children:[A.jsxs("div",{className:"header-left",children:[A.jsxs("button",{className:"sidebar-toggle",onClick:()=>n(!t),children:[A.jsx("span",{className:"hamburger"}),A.jsx("span",{className:"hamburger"}),A.jsx("span",{className:"hamburger"})]}),A.jsxs("div",{className:"brand",children:[A.jsx("span",{className:"brand-icon",children:"🚀"}),A.jsx("span",{className:"brand-text",children:"MIA Logistics"}),A.jsx("span",{className:"brand-version",children:"v3.0"})]})]}),A.jsx("div",{className:"header-center",children:A.jsxs("div",{className:"system-status",children:[A.jsx("div",{className:"status-indicator online"}),A.jsx("span",{children:"Hệ thống hoạt động bình thường"})]})}),A.jsxs("div",{className:"header-right",children:[A.jsxs("div",{className:"user-info",children:[A.jsx("div",{className:"user-avatar",children:"👤"}),A.jsxs("div",{className:"user-details",children:[A.jsx("span",{className:"user-name",children:"Admin"}),A.jsx("span",{className:"user-role",children:"Quản trị viên"})]})]}),A.jsxs("div",{className:"header-actions",children:[A.jsx("button",{className:"action-btn",title:"Thông báo",children:"🔔"}),A.jsx("button",{className:"action-btn",title:"Cài đặt",children:"⚙️"})]})]})]}),A.jsxs("div",{className:"layout-body",children:[A.jsxs("aside",{className:"sidebar "+(t?"collapsed":""),children:[A.jsxs("nav",{className:"sidebar-nav",children:[A.jsxs("div",{className:"nav-section",children:[A.jsx("h3",{className:"nav-section-title",children:"Điều hướng"}),[{path:"/",icon:"🏠",label:"Trang chủ",description:"Tổng quan hệ thống"},{path:"/dashboard",icon:"📊",label:"Bảng điều khiển",description:"Theo dõi thời gian thực"},{path:"/ai-analytics",icon:"🧠",label:"Phân tích AI",description:"Thông minh và dự đoán"},{path:"/google-sheets",icon:"📋",label:"Google Sheets",description:"Quản lý bảng tính"},{path:"/google-drive",icon:"📁",label:"Google Drive",description:"Quản lý tệp tin"},{path:"/google-apps-script",icon:"⚙️",label:"Google Apps Script",description:"Tự động hóa công việc"},{path:"/telegram",icon:"💬",label:"Telegram Bot",description:"Gửi thông báo"},{path:"/automation",icon:"🤖",label:"Automation",description:"Tự động hóa quy trình",children:[{path:"/automation",icon:"📊",label:"Dashboard",description:"Tổng quan automation"},{path:"/automation/control",icon:"🎮",label:"Control Panel",description:"Điều khiển automation"},{path:"/automation/config",icon:"⚙️",label:"Configuration",description:"Cấu hình hệ thống"}]}].map(e=>A.jsx("div",{children:e.children?A.jsxs("div",{className:"nav-parent",children:[A.jsxs("div",{className:"nav-item nav-parent-header",children:[A.jsx("span",{className:"nav-icon",children:e.icon}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:e.label}),!t&&A.jsx("span",{className:"nav-description",children:e.description})]})]}),!t&&A.jsx("div",{className:"nav-children",children:e.children.map(e=>A.jsxs(i,{to:e.path,className:"nav-item nav-child "+(c(e.path)?"active":""),children:[A.jsx("span",{className:"nav-icon",children:e.icon}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:e.label}),A.jsx("span",{className:"nav-description",children:e.description})]})]},e.path))})]}):A.jsxs(i,{to:e.path,className:"nav-item "+(c(e.path)?"active":""),children:[A.jsx("span",{className:"nav-icon",children:e.icon}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:e.label}),!t&&A.jsx("span",{className:"nav-description",children:e.description})]})]})},e.path))]}),A.jsxs("div",{className:"nav-section",children:[A.jsx("h3",{className:"nav-section-title",children:"Công cụ"}),A.jsxs("div",{className:"nav-item",children:[A.jsx("span",{className:"nav-icon",children:"📈"}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:"Báo cáo"}),!t&&A.jsx("span",{className:"nav-description",children:"Xuất báo cáo"})]})]}),A.jsxs("div",{className:"nav-item",children:[A.jsx("span",{className:"nav-icon",children:"🔧"}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:"Cài đặt"}),!t&&A.jsx("span",{className:"nav-description",children:"Cấu hình hệ thống"})]})]})]}),A.jsxs("div",{className:"nav-section",children:[A.jsx("h3",{className:"nav-section-title",children:"Hỗ trợ"}),A.jsxs("div",{className:"nav-item",children:[A.jsx("span",{className:"nav-icon",children:"📚"}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:"Hướng dẫn"}),!t&&A.jsx("span",{className:"nav-description",children:"Tài liệu sử dụng"})]})]}),A.jsxs("div",{className:"nav-item",children:[A.jsx("span",{className:"nav-icon",children:"💬"}),A.jsxs("div",{className:"nav-content",children:[A.jsx("span",{className:"nav-label",children:"Liên hệ"}),!t&&A.jsx("span",{className:"nav-description",children:"Hỗ trợ kỹ thuật"})]})]})]})]}),A.jsx("div",{className:"sidebar-footer",children:A.jsxs("div",{className:"connection-status-section",children:[A.jsxs("div",{className:"connection-status-header",onClick:()=>o(!r),children:[A.jsx("h4",{className:"connection-title",children:"Trạng thái kết nối"}),A.jsx("span",{className:"expand-icon",children:r?"▼":"▶"})]}),r&&A.jsxs("div",{className:"connection-items",children:[A.jsxs("div",{className:"connection-item",children:[A.jsx("div",{className:"connection-icon",children:"📊"}),A.jsxs("div",{className:"connection-info",children:[A.jsx("div",{className:"connection-name",children:"Google Sheets"}),A.jsxs("div",{className:"connection-status",children:[A.jsx("span",{className:"status-dot connected"}),A.jsx("span",{children:"Đã kết nối"})]})]})]}),A.jsxs("div",{className:"connection-item",children:[A.jsx("div",{className:"connection-icon",children:"📁"}),A.jsxs("div",{className:"connection-info",children:[A.jsx("div",{className:"connection-name",children:"Google Drive"}),A.jsxs("div",{className:"connection-status",children:[A.jsx("span",{className:"status-dot connected"}),A.jsx("span",{children:"Đã kết nối"})]})]})]}),A.jsxs("div",{className:"connection-item",children:[A.jsx("div",{className:"connection-icon",children:"⚙️"}),A.jsxs("div",{className:"connection-info",children:[A.jsx("div",{className:"connection-name",children:"Google Apps Script"}),A.jsxs("div",{className:"connection-status",children:[A.jsx("span",{className:"status-dot connected"}),A.jsx("span",{children:"Đã kết nối"})]})]})]}),A.jsxs("div",{className:"connection-item",children:[A.jsx("div",{className:"connection-icon",children:"💬"}),A.jsxs("div",{className:"connection-info",children:[A.jsx("div",{className:"connection-name",children:"Telegram Bot"}),A.jsxs("div",{className:"connection-status",children:[A.jsx("span",{className:"status-dot connected"}),A.jsx("span",{children:"Đã kết nối"})]})]})]}),A.jsxs("div",{className:"connection-item",children:[A.jsx("div",{className:"connection-icon",children:"🤖"}),A.jsxs("div",{className:"connection-info",children:[A.jsx("div",{className:"connection-name",children:"Automation"}),A.jsxs("div",{className:"connection-status",children:[A.jsx("span",{className:"status-dot connected"}),A.jsx("span",{children:"Đã kết nối"})]})]})]})]})]})})]}),A.jsx("main",{className:"main-content",children:A.jsx("div",{className:"content-wrapper",children:e})})]})]})};var _e,je,we,Te={},Ne={},Ee={};function Ce(){if(_e)return Ee;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(){}_e=1,Ee.__esModule=!0,Ee.default=function(t){var s="".concat(t,"Storage");return function(t){if("object"!==("undefined"==typeof self?"undefined":e(self))||!(t in self))return!1;try{var n=self[t],s="redux-persist ".concat(t," test");n.setItem(s,"test"),n.getItem(s),n.removeItem(s)}catch(a){return!1}return!0}(s)?self[s]:n};var n={getItem:t,setItem:t,removeItem:t};return Ee}var ke=function(){if(we)return Te;var e;we=1,Te.__esModule=!0,Te.default=void 0;var t=(0,((e=function(){if(je)return Ne;je=1,Ne.__esModule=!0,Ne.default=function(e){var n=(0,t.default)(e);return{getItem:function(e){return new Promise(function(t,s){t(n.getItem(e))})},setItem:function(e,t){return new Promise(function(s,a){s(n.setItem(e,t))})},removeItem:function(e){return new Promise(function(t,s){t(n.removeItem(e))})}}};var e,t=(e=Ce())&&e.__esModule?e:{default:e};return Ne}())&&e.__esModule?e:{default:e}).default)("local");return Te.default=t,Te}();const Se="LOGIN_REQUEST",Ie="LOGIN_SUCCESS",Ae="LOGIN_FAILURE",Pe="LOGOUT",Le="FETCH_SHEETS_REQUEST",De="FETCH_SHEETS_SUCCESS",Oe="FETCH_SHEETS_FAILURE",Re="UPDATE_SHEET_DATA",Me="FETCH_FILES_REQUEST",Ue="FETCH_FILES_SUCCESS",$e="FETCH_FILES_FAILURE",Fe="UPLOAD_FILE_REQUEST",Be="UPLOAD_FILE_SUCCESS",We="UPLOAD_FILE_FAILURE",He="FETCH_DASHBOARD_DATA",Ge="UPDATE_DASHBOARD_DATA",Ve="SET_ACTIVE_TAB",ze="SHOW_ALERT",Ye="HIDE_ALERT",Ke="CLEAR_ALL_ALERTS",qe={isAuthenticated:!1,user:null,loading:!1,error:null,serviceAccount:{email:null,projectId:null,isConfigured:!1}},Qe={sheets:[],currentSheet:null,sheetData:[],loading:!1,error:null,lastUpdated:null},Xe={files:[],folders:[],currentFolder:null,loading:!1,error:null,uploadProgress:0,lastUpdated:null},Je={activeTab:"overview",data:{overview:{totalSheets:0,totalFiles:0,lastSync:null,systemHealth:"healthy"},analytics:{charts:[],metrics:{},trends:[]},alerts:{unread:0,recent:[]}},loading:!1,error:null,lastUpdated:null},Ze={alerts:[],notifications:[],unreadCount:0},et=u(f({key:"root",storage:n(ke),whitelist:["auth","dashboard"]},m({auth:(e=qe,t)=>{switch(t.type){case Se:return{...e,loading:!0,error:null};case Ie:return{...e,isAuthenticated:!0,user:t.payload.user,serviceAccount:{...e.serviceAccount,email:t.payload.serviceAccount?.email,projectId:t.payload.serviceAccount?.projectId,isConfigured:!0},loading:!1,error:null};case Ae:return{...e,isAuthenticated:!1,user:null,loading:!1,error:t.payload};case Pe:return{...qe};default:return e}},sheets:(e=Qe,t)=>{switch(t.type){case Le:return{...e,loading:!0,error:null};case De:return{...e,sheets:t.payload.sheets,currentSheet:t.payload.currentSheet,loading:!1,error:null,lastUpdated:(new Date).toISOString()};case Oe:return{...e,loading:!1,error:t.payload};case Re:return{...e,sheetData:t.payload.data,lastUpdated:(new Date).toISOString()};default:return e}},drive:(e=Xe,t)=>{switch(t.type){case Me:return{...e,loading:!0,error:null};case Ue:return{...e,files:t.payload.files,folders:t.payload.folders,currentFolder:t.payload.currentFolder,loading:!1,error:null,lastUpdated:(new Date).toISOString()};case $e:return{...e,loading:!1,error:t.payload};case Fe:return{...e,uploadProgress:0,error:null};case Be:return{...e,files:[...e.files,t.payload.file],uploadProgress:100,lastUpdated:(new Date).toISOString()};case We:return{...e,uploadProgress:0,error:t.payload};default:return e}},dashboard:(e=Je,t)=>{switch(t.type){case He:return{...e,loading:!0,error:null};case Ge:return{...e,data:{...e.data,...t.payload},loading:!1,error:null,lastUpdated:(new Date).toISOString()};case Ve:return{...e,activeTab:t.payload};default:return e}},alerts:(e=Ze,t)=>{switch(t.type){case ze:const n={id:Date.now(),type:t.payload.type||"info",title:t.payload.title,message:t.payload.message,timestamp:(new Date).toISOString(),read:!1};return{...e,alerts:[...e.alerts,n],notifications:[...e.notifications,n],unreadCount:e.unreadCount+1};case Ye:return{...e,alerts:e.alerts.filter(e=>e.id!==t.payload.id),unreadCount:Math.max(0,e.unreadCount-1)};case Ke:return{...e,alerts:[],notifications:[],unreadCount:0};default:return e}}})),p(v));g(et);const tt=s.lazy(()=>h(()=>import("./LiveDashboard.Cxfqj_W2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),nt=s.lazy(()=>h(()=>import("./AIDashboard.Dlsa1gZJ.js"),__vite__mapDeps([9,1,2,3,6,5,7,10]))),st=s.lazy(()=>h(()=>import("./GoogleSheetsIntegration.cT7_-lRZ.js"),__vite__mapDeps([11,1,2,3,6,5,7,12]))),at=s.lazy(()=>h(()=>import("./GoogleDriveIntegration.DB5PxO4A.js"),__vite__mapDeps([13,1,2,3,6,5,7,14]))),it=s.lazy(()=>h(()=>import("./GoogleAppsScriptIntegration.CBMuel_6.js"),__vite__mapDeps([15,1,2,3,6,5,7,16]))),rt=s.lazy(()=>h(()=>import("./TelegramIntegration.B-6nparB.js"),__vite__mapDeps([17,1,2,3,6,5,7,18]))),ot=s.lazy(()=>h(()=>import("./AutomationDashboard.D_O_3uDk.js"),__vite__mapDeps([19,1,2,3,6,5,7,20]))),lt=s.lazy(()=>h(()=>import("./AutomationPanelWrapper.DErDGmIC.js"),__vite__mapDeps([21,1,2,5,6,3,7,22]))),ct=s.lazy(()=>h(()=>import("./ConfigPageWrapper.CAMaV-VR.js"),__vite__mapDeps([23,1,2,6,3,5,7,24]))),dt=(e,t="low")=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>{e()},{timeout:"high"===t?2e3:5e3}):setTimeout(()=>{e()},"high"===t?100:2e3)};"undefined"!=typeof window&&(dt(()=>h(()=>import("./LiveDashboard.Cxfqj_W2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])),"high"),setTimeout(()=>{dt(()=>h(()=>import("./AIDashboard.Dlsa1gZJ.js"),__vite__mapDeps([9,1,2,3,6,5,7,10])),"medium"),dt(()=>h(()=>import("./GoogleSheetsIntegration.cT7_-lRZ.js"),__vite__mapDeps([11,1,2,3,6,5,7,12])),"medium")},3e3),setTimeout(()=>{dt(()=>h(()=>import("./GoogleDriveIntegration.DB5PxO4A.js"),__vite__mapDeps([13,1,2,3,6,5,7,14]))),dt(()=>h(()=>import("./AutomationDashboard.D_O_3uDk.js"),__vite__mapDeps([19,1,2,3,6,5,7,20])))},5e3));const ht=()=>A.jsxs("div",{className:"home-container",children:[A.jsxs("div",{className:"hero-section",children:[A.jsx("h1",{children:"🚀 MIA Logistics Integration v3.0"}),A.jsx("p",{children:"Hệ thống quản lý logistics thông minh với AI và Google Integration"})]}),A.jsxs("div",{className:"features-grid",children:[A.jsxs("div",{className:"feature-card primary",children:[A.jsx("h3",{children:"📊 Live Dashboard"}),A.jsx("p",{children:"Theo dõi thời gian thực, giám sát hiệu suất và phân tích hệ thống với WebSocket integration."}),A.jsxs("div",{className:"feature-stats",children:[A.jsxs("div",{className:"stat",children:[A.jsx("span",{className:"stat-value",children:"99.9%"}),A.jsx("span",{className:"stat-label",children:"Uptime"})]}),A.jsxs("div",{className:"stat",children:[A.jsx("span",{className:"stat-value",children:"2.3s"}),A.jsx("span",{className:"stat-label",children:"Response Time"})]})]})]}),A.jsxs("div",{className:"feature-card secondary",children:[A.jsx("h3",{children:"🧠 AI Analytics"}),A.jsx("p",{children:"Phân tích thông minh, dự đoán xu hướng và khuyến nghị tối ưu hóa cho hệ thống logistics."}),A.jsxs("div",{className:"feature-stats",children:[A.jsxs("div",{className:"stat",children:[A.jsx("span",{className:"stat-value",children:"92%"}),A.jsx("span",{className:"stat-label",children:"Accuracy"})]}),A.jsxs("div",{className:"stat",children:[A.jsx("span",{className:"stat-value",children:"15%"}),A.jsx("span",{className:"stat-label",children:"Cost Reduction"})]})]})]}),A.jsxs("div",{className:"feature-card tertiary",children:[A.jsx("h3",{children:"📋 Google Sheets"}),A.jsx("p",{children:"Tích hợp Google Sheets để quản lý dữ liệu, báo cáo và tự động hóa quy trình làm việc."}),A.jsxs("div",{className:"feature-stats",children:[A.jsxs("div",{className:"stat",children:[A.jsx("span",{className:"stat-value",children:"1,250"}),A.jsx("span",{className:"stat-label",children:"Records"})]}),A.jsxs("div",{className:"stat",children:[A.jsx("span",{className:"stat-value",children:"24/7"}),A.jsx("span",{className:"stat-label",children:"Sync"})]})]})]})]}),A.jsxs("div",{className:"features-grid",children:[A.jsxs("div",{className:"feature-card",children:[A.jsx("h3",{children:"📈 Trạng thái hệ thống"}),A.jsxs("div",{className:"status-list",children:[A.jsxs("div",{className:"status-item",children:[A.jsx("span",{className:"status-icon",children:"✅"}),A.jsxs("div",{className:"status-content",children:[A.jsx("span",{className:"status-title",children:"Frontend"}),A.jsx("span",{className:"status-desc",children:"Tối ưu hóa & Triển khai"})]})]}),A.jsxs("div",{className:"status-item",children:[A.jsx("span",{className:"status-icon",children:"✅"}),A.jsxs("div",{className:"status-content",children:[A.jsx("span",{className:"status-title",children:"Backend"}),A.jsx("span",{className:"status-desc",children:"WebSocket Ready"})]})]}),A.jsxs("div",{className:"status-item",children:[A.jsx("span",{className:"status-icon",children:"✅"}),A.jsxs("div",{className:"status-content",children:[A.jsx("span",{className:"status-title",children:"Automation"}),A.jsx("span",{className:"status-desc",children:"Hoạt động"})]})]})]}),A.jsxs("div",{className:"system-health",children:[A.jsx("span",{className:"health-label",children:"Tình trạng hệ thống:"}),A.jsx("span",{className:"health-status healthy",children:"Khỏe mạnh"})]})]}),A.jsxs("div",{className:"feature-card",children:[A.jsx("h3",{children:"🎯 Tính năng mới v3.0"}),A.jsx("div",{className:"feature-tags",children:["📡 Tích hợp WebSocket thời gian thực","📊 Dashboard hiệu suất trực tiếp","⚡ Cải thiện hiệu suất 50%","🎨 Thiết kế UI/UX hiện đại","📱 Hỗ trợ di động responsive","🔒 Tính năng bảo mật nâng cao"].map((e,t)=>A.jsx("span",{className:"feature-tag",children:e},t))})]})]})]});function mt(){return r.useEffect(()=>()=>{},[]),A.jsx(y,{store:et,children:A.jsx(x,{locale:ye,theme:{algorithm:b.defaultAlgorithm,token:{colorPrimary:"#3b82f6",borderRadius:8}},children:A.jsx(o,{children:A.jsx("div",{className:"App",children:A.jsx(be,{children:A.jsx(s.Suspense,{fallback:A.jsx(xe,{}),children:A.jsxs(l,{children:[A.jsx(c,{path:"/",element:A.jsx(ht,{})}),A.jsx(c,{path:"/dashboard",element:A.jsx(tt,{})}),A.jsx(c,{path:"/ai-analytics",element:A.jsx(nt,{})}),A.jsx(c,{path:"/google-sheets",element:A.jsx(st,{})}),A.jsx(c,{path:"/google-drive",element:A.jsx(at,{})}),A.jsx(c,{path:"/google-apps-script",element:A.jsx(it,{})}),A.jsx(c,{path:"/telegram",element:A.jsx(rt,{})}),A.jsx(c,{path:"/automation",element:A.jsx(ot,{})}),A.jsx(c,{path:"/automation/control",element:A.jsx(lt,{})}),A.jsx(c,{path:"/automation/config",element:A.jsx(ct,{})}),A.jsx(c,{path:"*",element:A.jsx(d,{to:"/",replace:!0})})]})})})})})})})}var ut={};const pt=ut.REACT_APP_ANALYTICS_ENDPOINT,gt=ut.REACT_APP_VERSION||"1.0.0",ft={CLS:{good:.1,poor:.25},FID:{good:100,poor:300},FCP:{good:1800,poor:3e3},LCP:{good:2500,poor:4e3},TTFB:{good:800,poor:1800}};function vt({name:e,value:t,id:n,delta:s,...a}){const i=function(e,t){const n=ft[e];return n?t<=n.good?"good":t<=n.poor?"needs-improvement":"poor":"unknown"}(e,t);Math.round(t),Date.now();const r=JSON.stringify({metric:e,value:Math.round(t),rating:i,id:n,delta:Math.round(s),url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now(),appVersion:gt,sessionId:yt(),...a});pt&&(navigator.sendBeacon?navigator.sendBeacon(pt,r):fetch(pt,{method:"POST",body:r,headers:{"Content-Type":"application/json"},keepalive:!0}).catch(console.error))}function yt(){let e=sessionStorage.getItem("sessionId");return e||(e=Math.random().toString(36).substr(2,9),sessionStorage.setItem("sessionId",e)),e}const xt=new class{constructor(){this.swRegistration=null,this.isUpdateAvailable=!1,this.updateCallbacks=[]}async init(){if(!("serviceWorker"in navigator))return!1;try{return this.swRegistration=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"imports"}),this.setupUpdateDetection(),this.setupMessageListener(),this.setupBackgroundSync(),!0}catch(e){return!1}}setupUpdateDetection(){this.swRegistration&&(this.swRegistration.addEventListener("updatefound",()=>{const e=this.swRegistration.installing;e&&e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&(this.isUpdateAvailable=!0,this.notifyUpdateCallbacks())})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),setInterval(()=>{this.swRegistration&&this.swRegistration.update()},6e4))}setupMessageListener(){navigator.serviceWorker.addEventListener("message",e=>{const{type:t,...n}=e.data;switch(t){case"CACHE_SIZE":case"CACHE_UPDATED":break;case"OFFLINE_STATUS":this.handleOfflineStatus(n.offline)}})}async setupBackgroundSync(){if(this.swRegistration&&"sync"in window.ServiceWorkerRegistration.prototype)try{await this.swRegistration.sync.register("background-sync")}catch(e){}}applyUpdate(){if(!this.swRegistration||!this.isUpdateAvailable)return;const e=this.swRegistration.waiting;e&&(e.postMessage({type:"SKIP_WAITING"}),this.isUpdateAvailable=!1)}onUpdateAvailable(e){this.updateCallbacks.push(e)}notifyUpdateCallbacks(){this.updateCallbacks.forEach(e=>{try{e(this.isUpdateAvailable)}catch(t){}})}async cacheUrls(e){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CACHE_URLS",payload:{urls:e}})}async clearCache(e=null){navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_CACHE",payload:{cacheName:e}})}async getCacheSize(){return navigator.serviceWorker.controller?new Promise(e=>{const t=new MessageChannel;t.port1.onmessage=t=>{const{type:n,size:s}=t.data;"CACHE_SIZE"===n&&e(s||0)},navigator.serviceWorker.controller.postMessage({type:"GET_CACHE_SIZE"},[t.port2]),setTimeout(()=>e(0),5e3)}):0}handleOfflineStatus(e){e?this.showOfflineNotification():this.hideOfflineNotification()}showOfflineNotification(){this.hideOfflineNotification();const e=document.createElement("div");e.id="offline-notification",e.className="offline-notification",e.innerHTML='\n      <div class="offline-notification-content">\n        <span class="offline-icon">⚠️</span>\n        <span class="offline-message">You\'re offline. Some features may be limited.</span>\n        <button class="offline-dismiss" onclick="this.parentElement.parentElement.remove()">×</button>\n      </div>\n    ',e.innerHTML+="\n      <style>\n        .offline-notification {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          background: #f59e0b;\n          color: white;\n          padding: 12px;\n          text-align: center;\n          z-index: 10000;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n          animation: slideDown 0.3s ease-out;\n        }\n\n        .offline-notification-content {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 8px;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        .offline-icon {\n          font-size: 16px;\n        }\n\n        .offline-message {\n          font-size: 14px;\n          font-weight: 500;\n        }\n\n        .offline-dismiss {\n          background: none;\n          border: none;\n          color: white;\n          font-size: 18px;\n          cursor: pointer;\n          padding: 0;\n          margin-left: auto;\n          width: 24px;\n          height: 24px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 50%;\n          transition: background-color 0.2s;\n        }\n\n        .offline-dismiss:hover {\n          background-color: rgba(255, 255, 255, 0.2);\n        }\n\n        @keyframes slideDown {\n          from {\n            transform: translateY(-100%);\n          }\n          to {\n            transform: translateY(0);\n          }\n        }\n\n        @media (prefers-color-scheme: dark) {\n          .offline-notification {\n            background: #d97706;\n          }\n        }\n      </style>\n    ",document.body.appendChild(e),setTimeout(()=>{this.hideOfflineNotification()},1e4)}hideOfflineNotification(){const e=document.getElementById("offline-notification");e&&e.remove()}formatBytes(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}getStatus(){return{supported:"serviceWorker"in navigator,registered:!!this.swRegistration,updateAvailable:this.isUpdateAvailable,controller:!!navigator.serviceWorker.controller}}async unregister(){if(this.swRegistration)try{const e=await this.swRegistration.unregister();return this.swRegistration=null,e}catch(e){return!1}}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{xt.init()}):xt.init();var bt={};class _t{constructor(e={}){this.config={endpoint:e.endpoint||"/api/rum/metrics",batchSize:e.batchSize||10,flushInterval:e.flushInterval||3e4,sampleRate:e.sampleRate||1,enableWebVitals:!1!==e.enableWebVitals,enableUserTiming:!1!==e.enableUserTiming,enableResourceTiming:!1!==e.enableResourceTiming,enableNavigationTiming:!1!==e.enableNavigationTiming,enableErrorTracking:!1!==e.enableErrorTracking,enableUserInteractions:!1!==e.enableUserInteractions,customDimensions:e.customDimensions||{},debug:e.debug||!1,...e},this.metrics=[],this.sessionId=this._generateSessionId(),this.startTime=Date.now(),this.userId=e.userId||this._generateUserId(),this.pageInfo=this._getPageInfo(),this.observers=new Map,this._initialize()}_initialize(){Math.random()>this.config.sampleRate||(this.config.enableWebVitals&&this._initWebVitals(),(this.config.enableUserTiming||this.config.enableResourceTiming||this.config.enableNavigationTiming)&&this._initPerformanceObserver(),this.config.enableErrorTracking&&this._initErrorTracking(),this.config.enableUserInteractions&&this._initUserInteractionTracking(),this._setupPeriodicFlush(),this._setupPageLifecycle(),this._setupUnloadHandler())}_initWebVitals(){(async()=>{try{if("undefined"!=typeof window&&window.webVitals){const{getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:a}=window.webVitals;e(this._onWebVital.bind(this)),t(this._onWebVital.bind(this)),n(this._onWebVital.bind(this)),s(this._onWebVital.bind(this)),a(this._onWebVital.bind(this))}else this._collectWebVitalsManually()}catch(e){this._collectWebVitalsManually()}})()}_collectWebVitalsManually(){let e=0;const t=new PerformanceObserver(t=>{for(const n of t.getEntries())n.hadRecentInput||(e+=n.value)});try{t.observe({entryTypes:["layout-shift"]}),setTimeout(()=>{this._recordMetric("CLS",e),t.disconnect()},5e3)}catch(a){}const n=new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];this._recordMetric("LCP",n.renderTime||n.loadTime)});try{n.observe({entryTypes:["largest-contentful-paint"]})}catch(a){}const s=new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&this._recordMetric("FCP",t.startTime)});try{s.observe({entryTypes:["paint"]})}catch(a){}}_onWebVital(e){this._recordMetric(e.name,e.value,{id:e.id,delta:e.delta,rating:e.rating,entries:e.entries?.length||0})}_initPerformanceObserver(){const e=[];if(this.config.enableUserTiming&&e.push("measure","mark"),this.config.enableResourceTiming&&e.push("resource"),this.config.enableNavigationTiming&&e.push("navigation"),0===e.length)return;const t=new PerformanceObserver(e=>{for(const t of e.getEntries())this._handlePerformanceEntry(t)});try{t.observe({entryTypes:e}),this.observers.set("performance",t)}catch(n){}}_handlePerformanceEntry(e){switch(e.entryType){case"measure":case"mark":this._recordMetric("user-timing",e.duration||0,{name:e.name,type:e.entryType,startTime:e.startTime});break;case"resource":e.transferSize>1e3&&this._recordMetric("resource-timing",e.duration,{name:e.name,type:this._getResourceType(e.name),size:e.transferSize,cached:0===e.transferSize});break;case"navigation":this._recordNavigation(e)}}_recordNavigation(e){const t={"dns-lookup":e.domainLookupEnd-e.domainLookupStart,"tcp-connect":e.connectEnd-e.connectStart,"tls-handshake":e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,"dom-processing":e.domComplete-e.responseEnd,"load-complete":e.loadEventEnd-e.loadEventStart};Object.entries(t).forEach(([e,t])=>{t>0&&this._recordMetric("navigation-timing",t,{phase:e})})}_getResourceType(e){return e.includes(".js")?"script":e.includes(".css")?"stylesheet":e.match(/\.(jpg|jpeg|png|gif|webp|avif)$/i)?"image":e.match(/\.(woff|woff2|ttf|otf)$/i)?"font":"other"}_initErrorTracking(){window.addEventListener("error",e=>{this._recordError("javascript",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:e.error?.stack})}),window.addEventListener("unhandledrejection",e=>{this._recordError("promise",{message:e.reason?.message||String(e.reason),stack:e.reason?.stack})}),window.reportReactError&&(window.reportReactError=(e,t)=>{this._recordError("react",{message:e.message,stack:e.stack,componentStack:t.componentStack})})}_initUserInteractionTracking(){document.addEventListener("click",this._trackInteraction.bind(this,"click")),document.addEventListener("submit",this._trackInteraction.bind(this,"submit")),this._trackRouteChanges()}_trackInteraction(e,t){const n=t.target,s=this._getElementSelector(n);this._recordMetric("user-interaction",1,{type:e,selector:s,tagName:n.tagName.toLowerCase(),timestamp:Date.now()})}_trackRouteChanges(){let e=window.location.pathname;const t=history.pushState,n=history.replaceState;history.pushState=(...e)=>{t.apply(history,e),this._onRouteChange()},history.replaceState=(...e)=>{n.apply(history,e),this._onRouteChange()},window.addEventListener("popstate",()=>{this._onRouteChange()});setInterval(()=>{window.location.pathname!==e&&this._onRouteChange()},1e3)}_onRouteChange(){const e=window.location.pathname,t=this.pageInfo.pathname;this._recordMetric("route-change",1,{from:t,to:e,timestamp:Date.now()}),this.pageInfo=this._getPageInfo()}_getElementSelector(e){return e.id?`#${e.id}`:e.className?`.${e.className.split(" ")[0]}`:e.tagName.toLowerCase()}_recordMetric(e,t,n={}){const s={name:e,value:t,context:n,timestamp:Date.now(),sessionId:this.sessionId,userId:this.userId,page:this.pageInfo,userAgent:navigator.userAgent,...this.config.customDimensions};this.metrics.push(s),this.config.debug,this.metrics.length>=this.config.batchSize&&this.flush()}_recordError(e,t){this._recordMetric("error",1,{type:e,...t,url:window.location.href,timestamp:Date.now()})}_setupPeriodicFlush(){setInterval(()=>{this.flush()},this.config.flushInterval)}_setupPageLifecycle(){document.addEventListener("visibilitychange",()=>{this._recordMetric("visibility-change",1,{hidden:document.hidden,timestamp:Date.now()})}),window.addEventListener("focus",()=>{this._recordMetric("page-focus",1,{timestamp:Date.now()})}),window.addEventListener("blur",()=>{this._recordMetric("page-blur",1,{timestamp:Date.now()})})}_setupUnloadHandler(){const e=()=>{this.metrics.length>0&&this.flush(!0)};window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),navigator.sendBeacon&&window.addEventListener("unload",e)}async flush(e=!1){if(0===this.metrics.length)return;const t={metrics:[...this.metrics],session:{id:this.sessionId,startTime:this.startTime,duration:Date.now()-this.startTime}};this.metrics=[];try{e&&navigator.sendBeacon?navigator.sendBeacon(this.config.endpoint,JSON.stringify(t)):await fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}),this.config.debug}catch(n){this.metrics.unshift(...t.metrics)}}startTiming(e){performance.mark(`${e}-start`)}endTiming(e){performance.mark(`${e}-end`),performance.measure(e,`${e}-start`,`${e}-end`)}recordCustomMetric(e,t,n={}){this._recordMetric(`custom-${e}`,t,n)}setUserId(e){this.userId=e}setCustomDimension(e,t){this.config.customDimensions[e]=t}_generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_generateUserId(){let e=localStorage.getItem("rum-user-id");return e||(e=`user-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("rum-user-id",e)),e}_getPageInfo(){return{url:window.location.href,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,referrer:document.referrer,title:document.title}}getStatistics(){return{sessionId:this.sessionId,userId:this.userId,metricsBuffered:this.metrics.length,sessionDuration:Date.now()-this.startTime,observersActive:this.observers.size}}destroy(){this.observers.forEach(e=>{e.disconnect()}),this.observers.clear(),this.metrics.length>0&&this.flush(!0)}}let jt=null;const wt=new class{constructor(e={}){this.config={primaryCDN:e.primaryCDN||"https://cdn.jsdelivr.net",fallbackCDN:e.fallbackCDN||"https://unpkg.com",localFallback:e.localFallback||!0,timeout:e.timeout||5e3,cacheDuration:e.cacheDuration||864e5,retryAttempts:e.retryAttempts||2,domains:{images:e.domains?.images||"https://images.mia-vn.com",fonts:e.domains?.fonts||"https://fonts.googleapis.com",scripts:e.domains?.scripts||"https://cdn.jsdelivr.net",styles:e.domains?.styles||"https://cdn.jsdelivr.net",...e.domains},assets:{scripts:{react:"react@18/umd/react.production.min.js","react-dom":"react-dom@18/umd/react-dom.production.min.js",lodash:"lodash@4/lodash.min.js",moment:"moment@2/min/moment.min.js","chart.js":"chart.js@4/dist/chart.min.js",...e.assets?.scripts},styles:{antd:"antd@5/dist/reset.css",normalize:"normalize.css@8/normalize.css",...e.assets?.styles},fonts:{roboto:"css2?family=Roboto:wght@300;400;500;700&display=swap",inter:"css2?family=Inter:wght@300;400;500;600;700&display=swap",...e.assets?.fonts},...e.assets}},this.cache=new Map,this.loading=new Map,this.failed=new Set,this.metrics={hits:0,misses:0,failures:0,totalLoadTime:0}}async loadScript(e,t=null,n={}){const s=`script-${e}-${t||"latest"}`;if(this.cache.has(s))return this.metrics.hits++,this.cache.get(s);if(this.loading.has(s))return this.loading.get(s);const a=performance.now(),i=this._loadScriptInternal(e,t,n).then(e=>(this.metrics.totalLoadTime+=performance.now()-a,this.cache.set(s,e),this.loading.delete(s),e)).catch(e=>{throw this.metrics.failures++,this.loading.delete(s),this.failed.add(s),e});return this.loading.set(s,i),this.metrics.misses++,i}async _loadScriptInternal(e,t,n){const s=this.config.assets.scripts[e];if(!s)throw new Error(`Unknown script: ${e}`);const a=this._buildAssetUrls("scripts",s,t);for(let r=0;r<a.length;r++)try{return await this._loadScriptFromUrl(a[r],n),{name:e,url:a[r],source:0===r?"primary":"fallback"}}catch(i){if(r===a.length-1)throw i}}_loadScriptFromUrl(e,t={}){return new Promise((n,s)=>{const a=document.createElement("script");a.src=e,a.async=!1!==t.async,a.defer=t.defer||!1,a.crossOrigin=t.crossOrigin||"anonymous";const i=setTimeout(()=>{s(new Error(`Script load timeout: ${e}`))},this.config.timeout);a.onload=()=>{clearTimeout(i),n()},a.onerror=()=>{clearTimeout(i),s(new Error(`Script load failed: ${e}`))},document.head.appendChild(a)})}async loadStylesheet(e,t=null,n={}){const s=`style-${e}-${t||"latest"}`;if(this.cache.has(s))return this.metrics.hits++,this.cache.get(s);if(this.loading.has(s))return this.loading.get(s);const a=performance.now(),i=this._loadStylesheetInternal(e,t,n).then(e=>(this.metrics.totalLoadTime+=performance.now()-a,this.cache.set(s,e),this.loading.delete(s),e)).catch(e=>{throw this.metrics.failures++,this.loading.delete(s),this.failed.add(s),e});return this.loading.set(s,i),this.metrics.misses++,i}async _loadStylesheetInternal(e,t,n){const s=this.config.assets.styles[e];if(!s)throw new Error(`Unknown stylesheet: ${e}`);const a=this._buildAssetUrls("styles",s,t);for(let r=0;r<a.length;r++)try{return await this._loadStylesheetFromUrl(a[r],n),{name:e,url:a[r],source:0===r?"primary":"fallback"}}catch(i){if(r===a.length-1)throw i}}_loadStylesheetFromUrl(e,t={}){return new Promise((n,s)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,a.crossOrigin=t.crossOrigin||"anonymous";const i=setTimeout(()=>{s(new Error(`Stylesheet load timeout: ${e}`))},this.config.timeout);a.onload=()=>{clearTimeout(i),n()},a.onerror=()=>{clearTimeout(i),s(new Error(`Stylesheet load failed: ${e}`))},document.head.appendChild(a)})}async loadFont(e,t={}){const n=this.config.assets.fonts[e];if(!n)throw new Error(`Unknown font: ${e}`);const s=`${this.config.domains.fonts}/${n}`;try{return await this.loadStylesheet(e,null,{...t,customUrl:s}),!1!==t.preload&&this._preloadFontFiles(e),{name:e,url:s,source:"cdn"}}catch(a){throw a}}_preloadFontFiles(e){const t=document.createElement("link");t.rel="preload",t.as="font",t.type="font/woff2",t.crossOrigin="anonymous",document.head.appendChild(t)}_buildAssetUrls(e,t,n){const s=[],a=this.config.domains[e];return n?s.push(`${this.config.primaryCDN}/npm/${t.replace("@",`@${n}/`)}`):s.push(`${a||this.config.primaryCDN}/npm/${t}`),this.config.fallbackCDN!==this.config.primaryCDN&&s.push(`${this.config.fallbackCDN}/${t}`),s}async preloadCriticalAssets(e=[]){const t=[];for(const s of e)"script"===s.type?t.push(this.loadScript(s.name,s.version)):"style"===s.type?t.push(this.loadStylesheet(s.name,s.version)):"font"===s.type&&t.push(this.loadFont(s.name));const n=await Promise.allSettled(t);n.filter(e=>"fulfilled"===e.status).length;return n}getStatistics(){const e=this.metrics.hits+this.metrics.misses,t=e>0?(this.metrics.hits/e*100).toFixed(1):0,n=this.metrics.misses>0?(this.metrics.totalLoadTime/this.metrics.misses).toFixed(2):0;return{cacheHits:this.metrics.hits,cacheMisses:this.metrics.misses,failures:this.metrics.failures,hitRate:`${t}%`,averageLoadTime:`${n}ms`,cachedAssets:this.cache.size,failedAssets:this.failed.size}}clearCache(){this.cache.clear(),this.failed.clear(),this.metrics={hits:0,misses:0,failures:0,totalLoadTime:0}}async checkHealth(){const e=`${this.config.primaryCDN}/npm/react@18/package.json`;try{const t=await fetch(e,{method:"HEAD",timeout:this.config.timeout});return{healthy:t.ok,status:t.status,responseTime:Date.now()-startTime}}catch(t){return{healthy:!1,error:t.message}}}}({domains:{images:{}.REACT_APP_CDN_IMAGES||"https://images.mia-vn.com",fonts:"https://fonts.googleapis.com",scripts:"https://cdn.jsdelivr.net",styles:"https://cdn.jsdelivr.net"}});"undefined"!=typeof window&&(window.cdnManager=wt,"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",()=>{wt.preloadCriticalAssets([{type:"font",name:"roboto"},{type:"style",name:"normalize"}]).catch(e=>{})}));var Tt={};const Nt={development:{apiUrl:Tt.REACT_APP_API_URL||"http://localhost:3001",googleApiKey:Tt.REACT_APP_GOOGLE_API_KEY||"",googleClientId:Tt.REACT_APP_GOOGLE_CLIENT_ID||"",telegramBotToken:Tt.REACT_APP_TELEGRAM_BOT_TOKEN||"",debug:!0,logLevel:"debug",enableServiceWorker:!1,enableAnalytics:!1,cacheStrategy:"network-first"},staging:{apiUrl:Tt.REACT_APP_API_URL||"https://staging-api.mia-vn.com",googleApiKey:Tt.REACT_APP_GOOGLE_API_KEY||"",googleClientId:Tt.REACT_APP_GOOGLE_CLIENT_ID||"",telegramBotToken:Tt.REACT_APP_TELEGRAM_BOT_TOKEN||"",debug:!1,logLevel:"info",enableServiceWorker:!0,enableAnalytics:!0,cacheStrategy:"cache-first"},production:{apiUrl:Tt.REACT_APP_API_URL||"https://api.mia-vn.com",googleApiKey:Tt.REACT_APP_GOOGLE_API_KEY||"",googleClientId:Tt.REACT_APP_GOOGLE_CLIENT_ID||"",telegramBotToken:Tt.REACT_APP_TELEGRAM_BOT_TOKEN||"",debug:!1,logLevel:"error",enableServiceWorker:!0,enableAnalytics:!0,cacheStrategy:"cache-first"}},Et=()=>window.location.hostname.includes("staging")?"staging":"production",Ct=()=>{const e=Et();return{environment:e,...Nt[e]}},kt=e=>!(["googleApiKey","googleClientId"].filter(t=>!e[t]).length>0);var St={};const It=Ct();kt(It),_(vt),j(vt),w(vt),T(vt),N(vt),trackResourceTiming(),trackCustomMetrics();const At=function(e={}){return"undefined"==typeof window?null:jt||(jt=new _t({endpoint:bt.REACT_APP_RUM_ENDPOINT||"/api/rum/metrics",sampleRate:.1,debug:!1,customDimensions:{version:bt.REACT_APP_VERSION||"1.0.0",environment:"production"},...e}),window.rumMonitor=jt,jt)}({sampleRate:"production"===It.environment?.1:1,debug:It.debug,customDimensions:{version:St.REACT_APP_VERSION||"1.0.0",environment:It.environment,buildTime:St.REACT_APP_BUILD_TIME||(new Date).toISOString(),gitCommit:St.REACT_APP_GIT_COMMIT||"unknown"}}),Pt=()=>{const e=document.createElement("div");e.id="pwa-update-notification",e.innerHTML='\n    <div style="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      padding: 16px 24px;\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0,0,0,0.2);\n      z-index: 10001;\n      font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n      max-width: 320px;\n      animation: slideIn 0.4s ease-out;\n      backdrop-filter: blur(10px);\n    ">\n      <div style="font-weight: 600; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">\n        🚀 App Updated!\n      </div>\n      <div style="font-size: 14px; margin-bottom: 12px; opacity: 0.9;">\n        New features and improvements are ready. Restart to apply updates.\n      </div>\n      <div style="display: flex; gap: 8px;">\n        <button\n          onclick="window.location.reload(); this.parentElement.parentElement.parentElement.remove();"\n          style="\n            background: white;\n            color: #667eea;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 6px;\n            font-weight: 600;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s ease;\n          "\n          onmouseover="this.style.transform=\'scale(1.05)\'"\n          onmouseout="this.style.transform=\'scale(1)\'"\n        >\n          Restart App\n        </button>\n        <button\n          onclick="this.parentElement.parentElement.parentElement.remove();"\n          style="\n            background: rgba(255,255,255,0.1);\n            color: white;\n            border: 1px solid rgba(255,255,255,0.3);\n            padding: 8px 16px;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 12px;\n            transition: all 0.2s ease;\n          "\n          onmouseover="this.style.background=\'rgba(255,255,255,0.2)\'"\n          onmouseout="this.style.background=\'rgba(255,255,255,0.1)\'"\n        >\n          Later\n        </button>\n      </div>\n    </div>\n    <style>\n      @keyframes slideIn {\n        from { transform: translateX(100%) scale(0.8); opacity: 0; }\n        to { transform: translateX(0) scale(1); opacity: 1; }\n      }\n    </style>\n  ',document.body.appendChild(e),setTimeout(()=>{const e=document.getElementById("pwa-update-notification");e&&(e.style.animation="slideIn 0.3s ease-out reverse",setTimeout(()=>e.remove(),300))},15e3),At&&At.recordCustomMetric("pwa-update-notification-shown",1,{timestamp:Date.now()})};"serviceWorker"in navigator&&It.enableServiceWorker&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&Pt()})}),At&&At.recordCustomMetric("pwa-sw-registered",1,{scope:e.scope,timestamp:Date.now()})}).catch(e=>{At&&At.recordCustomMetric("pwa-sw-registration-failed",1,{error:e.message,timestamp:Date.now()})}),navigator.serviceWorker.addEventListener("message",e=>{e.data.type,e.data.type})});const Lt=[{type:"font",name:"roboto"},{type:"style",name:"normalize"}];wt.preloadCriticalAssets(Lt).then(()=>{At&&At.recordCustomMetric("cdn-preload-success",1,{assetsCount:Lt.length,timestamp:Date.now()})}).catch(e=>{At&&At.recordCustomMetric("cdn-preload-failure",1,{error:e.message,timestamp:Date.now()})}),At&&At.startTiming("app-initialization");var Dt;if(L.createRoot(document.getElementById("root")).render(A.jsx(r.StrictMode,{children:A.jsx(mt,{})})),At&&setTimeout(()=>{At.endTiming("app-initialization")},0),(Dt=e=>{It.debug,At&&At.recordCustomMetric("web-vital",e.value,{name:e.name,id:e.id,delta:e.delta,rating:e.rating,environment:It.environment}),It.enableAnalytics&&window.gtag&&window.gtag("event",e.name,{event_category:"Web Vitals",event_label:e.id,value:Math.round("CLS"===e.name?1e3*e.value:e.value),non_interaction:!0});const t={CLS:.1,FID:100,FCP:1800,LCP:2500,TTFB:800};t[e.name]&&e.value>t[e.name]&&At&&At.recordCustomMetric("performance-budget-exceeded",1,{metric:e.name,value:e.value,budget:t[e.name],timestamp:Date.now()})})&&Dt instanceof Function&&h(async()=>{const{getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:a}=await import("./web-vitals.DbSUPk88.js");return{getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:a}},[]).then(({getCLS:e,getFID:t,getFCP:n,getLCP:s,getTTFB:a})=>{e(Dt),t(Dt),n(Dt),s(Dt),a(Dt)}),"PerformanceObserver"in window)try{new PerformanceObserver(e=>{for(const t of e.getEntries())t.duration>50&&At&&At.recordCustomMetric("long-task",t.duration,{name:t.name,startTime:t.startTime,timestamp:Date.now()})}).observe({entryTypes:["longtask"]});new PerformanceObserver(e=>{for(const t of e.getEntries())t.hadRecentInput||At&&At.recordCustomMetric("layout-shift",t.value,{sources:t.sources?.length||0,timestamp:Date.now()})}).observe({entryTypes:["layout-shift"]})}catch(Ot){}window.addEventListener("beforeinstallprompt",e=>{At&&At.recordCustomMetric("pwa-install-prompt-available",1,{timestamp:Date.now()})}),window.addEventListener("appinstalled",()=>{At&&At.recordCustomMetric("pwa-app-installed",1,{timestamp:Date.now()}),It.enableAnalytics&&window.gtag&&window.gtag("event","pwa_install",{event_category:"engagement",event_label:"PWA Installation Completed"})}),window.addEventListener("online",()=>{At&&At.recordCustomMetric("network-online",1,{timestamp:Date.now()})}),window.addEventListener("offline",()=>{At&&At.recordCustomMetric("network-offline",1,{timestamp:Date.now()})});export{xe as L,A as j,ye as v};
