import{j as e,L as s}from"./index-VvjsA-rq.js";import{r as a}from"./chunk.BQy9AZNB.js";import{g as t}from"./chunk.DXnYxceR.js";import"./chunk.DEQ385Nk.js";import"./chunk.BhLMWRjL.js";import"./chunk.Bzdb9GAy.js";import"./web-vitals.DbSUPk88.js";const i=()=>{const{loading:i,error:n}=t(e=>e.auth),{isAuthenticated:c,serviceAccount:l}=t(e=>e.auth),[d,r]=a.useState(null),[h,o]=a.useState([]),[m,x]=a.useState(null),[j,u]=a.useState([]),[v,g]=a.useState(""),[N,b]=a.useState("text"),[p,_]=a.useState(!1),[y,f]=a.useState(""),[k,C]=a.useState(!1),T={id:"8434038911",username:"mia_logistics_bot",first_name:"MIA Logistics Bot",can_join_groups:!0,can_read_all_group_messages:!1,supports_inline_queries:!1},S=[{id:"-4818209867",type:"group",title:"MIA Logistics Team",username:"mia_logistics_team",member_count:15,last_activity:"2024-01-15T10:30:00Z"},{id:"123456789",type:"private",first_name:"Nguyá»…n VÄƒn A",username:"nguyenvana",last_activity:"2024-01-14T15:45:00Z"},{id:"987654321",type:"private",first_name:"Tráº§n Thá»‹ B",username:"tranthib",last_activity:"2024-01-13T09:20:00Z"}],w=[{id:1,chat_id:"-4818209867",text:"BÃ¡o cÃ¡o hÃ ng ngÃ y Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng!",date:"2024-01-15T10:30:00Z",from:"bot",message_type:"text"},{id:2,chat_id:"-4818209867",text:"CÃ³ 5 Ä‘Æ¡n hÃ ng má»›i cáº§n xá»­ lÃ½",date:"2024-01-15T09:15:00Z",from:"bot",message_type:"text"},{id:3,chat_id:"-4818209867",text:"Há»‡ thá»‘ng backup Ä‘Ã£ hoÃ n thÃ nh",date:"2024-01-15T08:00:00Z",from:"bot",message_type:"text"}];a.useEffect(()=>{r(T),o(S),u(w),_(!0)},[]);const D=e=>new Date(e).toLocaleDateString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),L=e=>"group"===e.type?e.title:`${e.first_name} ${e.last_name||""}`.trim(),I=e=>"group"===e.type?"ðŸ‘¥":"ðŸ‘¤";return i?e.jsx(s,{}):n?e.jsxs("div",{className:"error-state",children:["Lá»—i: ",n]}):e.jsxs("div",{className:"telegram-container",children:[e.jsxs("div",{className:"telegram-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("h1",{children:"ðŸ’¬ Telegram Bot"}),e.jsx("p",{children:"Quáº£n lÃ½ vÃ  gá»­i thÃ´ng bÃ¡o qua Telegram"})]}),e.jsx("div",{className:"header-right",children:e.jsxs("div",{className:"connection-status",children:[e.jsx("div",{className:"status-dot "+(p?"connected":"disconnected")}),e.jsx("span",{children:p?"ÄÃ£ káº¿t ná»‘i":"ChÆ°a káº¿t ná»‘i"})]})})]}),e.jsxs("div",{className:"telegram-content",children:[e.jsxs("div",{className:"bot-info-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{children:"ðŸ¤– ThÃ´ng tin Bot"})}),e.jsx("div",{className:"card-body",children:d&&e.jsxs("div",{className:"bot-details",children:[e.jsx("div",{className:"bot-avatar",children:"ðŸ¤–"}),e.jsxs("div",{className:"bot-info",children:[e.jsx("div",{className:"bot-name",children:d.first_name}),e.jsxs("div",{className:"bot-username",children:["@",d.username]}),e.jsxs("div",{className:"bot-id",children:["ID: ",d.id]})]})]})})]}),e.jsxs("div",{className:"webhook-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{children:"ðŸ”— CÃ i Ä‘áº·t Webhook"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"webhook-form",children:[e.jsx("input",{type:"url",placeholder:"Nháº­p URL webhook...",value:y,onChange:e=>f(e.target.value),className:"webhook-input"}),e.jsxs("div",{className:"webhook-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{y.trim()&&alert("Webhook Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t láº­p thÃ nh cÃ´ng!")},disabled:!y.trim(),children:"Thiáº¿t láº­p Webhook"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>{f(""),alert("Webhook Ä‘Ã£ Ä‘Æ°á»£c xÃ³a!")},disabled:!y.trim(),children:"XÃ³a Webhook"})]})]})})]}),e.jsxs("div",{className:"chats-messages-container",children:[e.jsxs("div",{className:"chats-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{children:"ðŸ’¬ Danh sÃ¡ch Chat"}),e.jsxs("span",{className:"chat-count",children:[h.length," chats"]})]}),e.jsx("div",{className:"chats-list",children:h.map(s=>e.jsxs("div",{className:"chat-item "+(m?.id===s.id?"active":""),onClick:()=>(e=>{x(e);const s=j.filter(s=>s.chat_id===e.id);u(s)})(s),children:[e.jsx("div",{className:"chat-icon",children:I(s)}),e.jsxs("div",{className:"chat-info",children:[e.jsx("div",{className:"chat-name",children:L(s)}),e.jsx("div",{className:"chat-meta",children:"group"===s.type?`${s.member_count} thÃ nh viÃªn`:"Tin nháº¯n riÃªng"}),e.jsx("div",{className:"chat-last-activity",children:D(s.last_activity)})]})]},s.id))})]}),e.jsx("div",{className:"messages-area",children:m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"messages-header",children:[e.jsxs("div",{className:"chat-title",children:[e.jsx("span",{className:"chat-icon",children:I(m)}),e.jsx("span",{children:L(m)})]}),e.jsx("div",{className:"message-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>C(!0),children:"âœ‰ï¸ Gá»­i tin nháº¯n"})})]}),e.jsx("div",{className:"messages-list",children:j.map(s=>e.jsx("div",{className:"message-item "+("bot"===s.from?"bot-message":"user-message"),children:e.jsxs("div",{className:"message-content",children:[e.jsx("div",{className:"message-text",children:s.text}),e.jsx("div",{className:"message-time",children:D(s.date)})]})},s.id))})]}):e.jsxs("div",{className:"no-chat-selected",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ’¬"}),e.jsx("h3",{children:"Chá»n má»™t chat Ä‘á»ƒ xem tin nháº¯n"}),e.jsx("p",{children:"Chá»n tá»« danh sÃ¡ch bÃªn trÃ¡i Ä‘á»ƒ báº¯t Ä‘áº§u trÃ² chuyá»‡n"})]})})]})]}),k&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Gá»­i tin nháº¯n"}),e.jsx("button",{className:"close-btn",onClick:()=>C(!1),children:"âœ•"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Loáº¡i tin nháº¯n"}),e.jsxs("select",{value:N,onChange:e=>b(e.target.value),className:"select-field",children:[e.jsx("option",{value:"text",children:"VÄƒn báº£n"}),e.jsx("option",{value:"photo",children:"HÃ¬nh áº£nh"}),e.jsx("option",{value:"document",children:"TÃ i liá»‡u"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ná»™i dung tin nháº¯n"}),e.jsx("textarea",{value:v,onChange:e=>g(e.target.value),placeholder:"Nháº­p ná»™i dung tin nháº¯n...",className:"textarea-field",rows:"4"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>C(!1),children:"Há»§y"}),e.jsx("button",{className:"btn btn-primary",onClick:async()=>{if(!v.trim()||!m)return;const e={id:Date.now(),chat_id:m.id,text:v,date:(new Date).toISOString(),from:"user",message_type:N};u(s=>[e,...s]),g(""),C(!1),setTimeout(()=>{const e={id:Date.now()+1,chat_id:m.id,text:"Tin nháº¯n Ä‘Ã£ Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng!",date:(new Date).toISOString(),from:"bot",message_type:"text"};u(s=>[e,...s])},1e3)},disabled:!v.trim(),children:"Gá»­i tin nháº¯n"}),e.jsx("button",{className:"btn btn-warning",onClick:()=>{if(!v.trim())return;const e=h.map(e=>({id:Date.now()+Math.random(),chat_id:e.id,text:v,date:(new Date).toISOString(),from:"user",message_type:N}));u(s=>[...e,...s]),g(""),C(!1)},disabled:!v.trim(),children:"Gá»­i táº¥t cáº£"})]})]})})]})};export{i as default};
