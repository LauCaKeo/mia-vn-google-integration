import{j as e,L as s}from"./index-VvjsA-rq.js";import{r as a}from"./chunk.BQy9AZNB.js";import{u as t,g as i}from"./chunk.DXnYxceR.js";import{R as l,A as c,C as r,X as n,Y as d,T as h,a as o,P as m,b as j,c as x}from"./chunk.B9fqMJp4.js";import"./chunk.DEQ385Nk.js";import"./chunk.BhLMWRjL.js";import"./chunk.Bzdb9GAy.js";import"./web-vitals.DbSUPk88.js";const v=()=>{t();const{data:v,loading:p,error:y}=i(e=>e.dashboard),{sheets:f}=i(e=>e.sheets),{files:u}=i(e=>e.drive),{alerts:N}=i(e=>e.alerts),[b,g]=a.useState(3e4),[k,S]=a.useState(!0),[A,D]=a.useState([{name:"00:00",sheets:12,files:8,alerts:2},{name:"04:00",sheets:15,files:12,alerts:1},{name:"08:00",sheets:18,files:15,alerts:3},{name:"12:00",sheets:22,files:18,alerts:2},{name:"16:00",sheets:25,files:22,alerts:4},{name:"20:00",sheets:28,files:25,alerts:1},{name:"24:00",sheets:30,files:28,alerts:2}]),M=[{name:"Google Sheets",value:f.length,color:"#3b82f6"},{name:"Google Drive",value:u.length,color:"#10b981"},{name:"Alerts",value:N.length,color:"#f59e0b"}];return a.useEffect(()=>{if(k){const e=setInterval(()=>{D(e=>e.map(e=>({...e,sheets:e.sheets+Math.floor(3*Math.random())-1,files:e.files+Math.floor(2*Math.random()),alerts:Math.max(0,e.alerts+Math.floor(3*Math.random())-1)})))},b);return()=>clearInterval(e)}},[k,b]),p?e.jsx(s,{text:"Đang tải dashboard...",fullScreen:!0}):y?e.jsxs("div",{className:"dashboard-error",children:[e.jsx("h3",{children:"Lỗi tải dashboard"}),e.jsx("p",{children:y})]}):e.jsxs("div",{className:"live-dashboard",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h2",{children:"📊 Live Dashboard"}),e.jsxs("div",{className:"dashboard-controls",children:[e.jsxs("div",{className:"live-indicator",children:[e.jsx("div",{className:"live-dot "+(k?"active":"")}),e.jsx("span",{children:k?"LIVE":"PAUSED"})]}),e.jsx("button",{className:"toggle-live-btn",onClick:()=>S(!k),children:k?"⏸️ Pause":"▶️ Resume"}),e.jsxs("select",{value:b,onChange:e=>g(Number(e.target.value)),className:"refresh-select",children:[e.jsx("option",{value:1e4,children:"10s"}),e.jsx("option",{value:3e4,children:"30s"}),e.jsx("option",{value:6e4,children:"1m"}),e.jsx("option",{value:3e5,children:"5m"})]})]})]}),e.jsxs("div",{className:"dashboard-grid",children:[e.jsxs("div",{className:"overview-cards",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📊"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:f.length}),e.jsx("p",{children:"Google Sheets"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📁"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:u.length}),e.jsx("p",{children:"Google Drive Files"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🔔"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:N.length}),e.jsx("p",{children:"Active Alerts"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⚡"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:"99.9%"}),e.jsx("p",{children:"System Health"})]})]})]}),e.jsxs("div",{className:"chart-container",children:[e.jsx("h3",{children:"📈 Real-time Activity"}),e.jsx(l,{width:"100%",height:300,children:e.jsxs(c,{data:A,children:[e.jsx(r,{strokeDasharray:"3 3"}),e.jsx(n,{dataKey:"name"}),e.jsx(d,{}),e.jsx(h,{}),e.jsx(o,{type:"monotone",dataKey:"sheets",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6}),e.jsx(o,{type:"monotone",dataKey:"files",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),e.jsx(o,{type:"monotone",dataKey:"alerts",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.6})]})})]}),e.jsxs("div",{className:"chart-container",children:[e.jsx("h3",{children:"📊 Data Distribution"}),e.jsx(l,{width:"100%",height:300,children:e.jsxs(m,{children:[e.jsx(j,{data:M,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:M.map((s,a)=>e.jsx(x,{fill:s.color},`cell-${a}`))}),e.jsx(h,{})]})})]}),e.jsxs("div",{className:"activity-container",children:[e.jsx("h3",{children:"🕒 Recent Activity"}),e.jsx("div",{className:"activity-list",children:[{time:"2 phút trước",action:'Sheet "mia-logistics-final" được cập nhật',type:"sheets"},{time:"5 phút trước",action:"File mới được upload lên Drive",type:"drive"},{time:"8 phút trước",action:"Alert mới: Low inventory warning",type:"alert"},{time:"12 phút trước",action:"Backup tự động hoàn thành",type:"system"},{time:"15 phút trước",action:"Sync dữ liệu thành công",type:"sync"}].map((s,a)=>e.jsxs("div",{className:"activity-item",children:[e.jsx("div",{className:"activity-time",children:s.time}),e.jsx("div",{className:"activity-action",children:s.action}),e.jsxs("div",{className:`activity-type ${s.type}`,children:["sheets"===s.type&&"📊","drive"===s.type&&"📁","alert"===s.type&&"🔔","system"===s.type&&"⚙️","sync"===s.type&&"🔄"]})]},a))})]})]})]})};export{v as default};
